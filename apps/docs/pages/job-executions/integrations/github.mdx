import { Callout } from "nextra/components";

# GitHub Actions

The GitHub Actions Job Agent in Ctrlplane enables seamless integration with
your GitHub Actions workflows. It allows you to trigger your GitHub Actions
pipelines directly from Ctrlplane, based on events like new releases, the
addition of new targets, or updates to existing targets. This
powerful integration lets you leverage Ctrlplane's flexible management
capabilities while utilizing the familiar and robust automation of GitHub
Actions.

## Key Features

- **Workflow Dispatch:** Triggers GitHub Actions workflows using the
  workflow_dispatch event.
- **Input Parameters:** Pass custom input parameters to your GitHub Actions
  workflows, allowing for dynamic customization.
- **Secure Authentication:** Uses GitHub personal access tokens (PATs) or GitHub
  Bot for secure authentication with your GitHub repositories.

## Configuration

<Callout>
  Due to [limitations of the GitHub
  API](https://github.com/orgs/community/discussions/9752), workflows do not
  return the run ID. Inorder for Ctrl Plane to get the ID it generates a random
  one that is passed into the pipeline and is expected to be added to the Run
  name. This can be done by adding

```yaml
name: Receiving Workflow
run-name: Receiving Workflow [${{ inputs.distinct_id && inputs.distinct_id || 'N/A' }}]

on:
  workflow_dispatch:
    inputs:
      distinct_id:
        description: "Distinct ID"
        required: false
```

</Callout>

### Configuring a workflows

Each provider will make there own assmputions about how values and properties
are expected to be passed to the underlying workflow. In this section we will
outline the format inwhich data will be passed in.

First, the workflow must be able to be triggered by a dispatch.

```yaml
on:
  workflow_dispatch: {}
```

Second, the following are the passed into the workflow in JSON.

```yaml
on:
  workflow_dispatch:
    inputs:
      distinct_id:
        description: "Distinct ID"
        required: false
      environment:
        description: "Environment"
        required: true
      release:
        description: "Release"
        required: true
```

### GitHub Bot

Using the GitHub bot is the recommended apporach to configuring access to your
GitHub organization.

### GitHub Token

This apporach requires using an API token for the provider to trigger workflows.
